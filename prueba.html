<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #222;
            font-family: Arial, sans-serif;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(20, 20px);
            grid-template-rows: repeat(20, 20px);
            gap: 1px;
            background-color: #555;
        }
        .cell {
            width: 20px;
            height: 20px;
            background-color: #333;
        }
        .snake {
            background-color: lime;
        }
        .food {
            background-color: red;
        }
        .game-over {
            color: white;
            font-size: 24px;
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<div class="grid" id="grid"></div>

<script>
    const grid = document.getElementById('grid');
    const gridSize = 20;
    let snake = [42, 41, 40]; // Posiciones iniciales
    let direction = 1; // 1 = derecha, -1 = izquierda, -20 = arriba, 20 = abajo
    let foodIndex = generateFood();
    let score = 0;
    let intervalTime = 200;
    let gameInterval = setInterval(moveSnake, intervalTime);

    // Crear la cuadrícula
    for (let i = 0; i < gridSize * gridSize; i++) {
        const cell = document.createElement('div');
        cell.classList.add('cell');
        grid.appendChild(cell);
    }

    const cells = Array.from(document.querySelectorAll('.cell'));

    // Control de dirección
    document.addEventListener('keydown', changeDirection);

    function moveSnake() {
        const head = snake[0] + direction;

        if (checkCollision(head)) {
            gameOver();
            return;
        }

        snake.unshift(head);

        if (head === foodIndex) {
            foodIndex = generateFood();
            score++;
            intervalTime *= 0.95; // Aumentar velocidad
            clearInterval(gameInterval);
            gameInterval = setInterval(moveSnake, intervalTime);
        } else {
            const tail = snake.pop();
            cells[tail].classList.remove('snake');
        }

        cells[head].classList.add('snake');
    }

    function generateFood() {
        let newFoodIndex;
        do {
            newFoodIndex = Math.floor(Math.random() * cells.length);
        } while (cells[newFoodIndex].classList.contains('snake'));
        cells[newFoodIndex].classList.add('food');
        return newFoodIndex;
    }

    function changeDirection(event) {
        const keyPressed = event.keyCode;
        const left = 37, up = 38, right = 39, down = 40;

        if (keyPressed === left && direction !== 1) direction = -1;
        if (keyPressed === up && direction !== gridSize) direction = -gridSize;
        if (keyPressed === right && direction !== -1) direction = 1;
        if (keyPressed === down && direction !== -gridSize) direction = gridSize;
    }

    function checkCollision(head) {
        return (
            head < 0 ||
            head >= gridSize * gridSize ||
            (direction === 1 && head % gridSize === 0) ||
            (direction === -1 && (head + 1) % gridSize === 0) ||
            cells[head].classList.contains('snake')
        );
    }

    function gameOver() {
        clearInterval(gameInterval);
        document.body.innerHTML += '<div class="game-over">¡Game Over! Puntuación: ' + score + '</div>';
    }
</script>

</body>
</html>
